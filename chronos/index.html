
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Marica Antonacci - marica.antonacci@ba.infn.it">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.10">
    
    
      
        <title>Execute scheduled jobs on Chronos - Apache Mesos Tutorial</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.d6be258b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="green">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#hello-world-example" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Apache Mesos Tutorial" class="md-header__button md-logo" aria-label="Apache Mesos Tutorial" data-md-component="logo">
      
  <img src="../assets/logo_infn.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apache Mesos Tutorial
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Execute scheduled jobs on Chronos
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/maricaantonacci/mesos-tutorial/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Apache Mesos Tutorial" class="md-nav__button md-logo" aria-label="Apache Mesos Tutorial" data-md-component="logo">
      
  <img src="../assets/logo_infn.png" alt="logo">

    </a>
    Apache Mesos Tutorial
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/maricaantonacci/mesos-tutorial/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../marathon/" class="md-nav__link">
        Deploy long running services on Marathon
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Execute scheduled jobs on Chronos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Execute scheduled jobs on Chronos
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#hello-world-example" class="md-nav__link">
    Hello world example
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#chronos-rest-apis" class="md-nav__link">
    Chronos REST APIs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#executing-a-job-in-a-docker-container" class="md-nav__link">
    Executing a job in a Docker container
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-uris-field-to-download-resources" class="md-nav__link">
    Using URIs field to download resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execute-a-job-dependency-chain" class="md-nav__link">
    Execute a job dependency chain
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/maricaantonacci/mesos-tutorial/edit/master/docs/chronos.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


  <h1>Execute scheduled jobs on Chronos</h1>

<h3 id="hello-world-example">Hello world example<a class="headerlink" href="#hello-world-example" title="Permanent link">&para;</a></h3>
<p>Using the web UI available on port <code>4400</code> of your remote machine, let' start our first simple job:</p>
<p><img alt="" src="../images/chronos_1.png" /></p>
<p>The job will run a <code>shell</code> command printing <code>hello world</code> on the standard output. It will execute every 30s. Indeed if you monitor the job execution, you will see that the job will be first queued, then it will run, then will be set to <code>idle</code> till the next run after 30s.</p>
<p><img alt="" src="../images/chronos_2.png" /></p>
<p><img alt="" src="../images/chronos_3.png" /></p>
<p>Look at the Mesos web UI to see the executed tasks:</p>
<p><img alt="" src="../images/chronos_4.png" /></p>
<h2 id="chronos-rest-apis">Chronos REST APIs<a class="headerlink" href="#chronos-rest-apis" title="Permanent link">&para;</a></h2>
<p>The main API endpoint are the following:</p>
<table>
<thead>
<tr>
<th align="left">API Endpoint</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>GET</code> /v1/scheduler/jobs</td>
<td align="left">This lists all jobs. The result is that JSON contains executor, invocationCount, and schedule/parents</td>
</tr>
<tr>
<td align="left"><code>DELETE</code> /v1/scheduler/jobs</td>
<td align="left">This deletes all jobs</td>
</tr>
<tr>
<td align="left"><code>DELETE</code> /v1/scheduler/task/kill/jobName</td>
<td align="left">This deletes tasks for a given job</td>
</tr>
<tr>
<td align="left"><code>DELETE</code> /v1/scheduler/job/jobName</td>
<td align="left">This deletes a particular job based on jobName</td>
</tr>
<tr>
<td align="left"><code>PUT</code> /v1/scheduler/job/jobName</td>
<td align="left">This manually starts a job</td>
</tr>
<tr>
<td align="left"><code>POST</code> /v1/scheduler/iso8601</td>
<td align="left">This adds a new job. The JSON passed should contain all the information about the job</td>
</tr>
<tr>
<td align="left"><code>POST</code> /v1/scheduler/dependency</td>
<td align="left">This adds a dependent job. It takes the same JSON format as a scheduled job. However, instead of the <code>schedule</code> field, it accepts a <code>parents</code> field.</td>
</tr>
<tr>
<td align="left"><code>GET</code> /v1/scheduler/graph/dot</td>
<td align="left">This returns the dependency graph in the form of a dot file</td>
</tr>
</tbody>
</table>
<h2 id="executing-a-job-in-a-docker-container">Executing a job in a Docker container<a class="headerlink" href="#executing-a-job-in-a-docker-container" title="Permanent link">&para;</a></h2>
<p>This time we will be using the REST API to submit the job. The endpoint to use is <code>/v1/scheduler/iso8601</code> and we will configure the job schedule so that it runs just one time (<code>R1//PT30s</code>):</p>
<p>Save the following json in a file with name <code>job.json</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">{</span>
  <span class="s2">&quot;schedule&quot;</span>: <span class="s2">&quot;R1//PT1M&quot;</span>,
  <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;dockerjob&quot;</span>,
  <span class="s2">&quot;container&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;DOCKER&quot;</span>,
    <span class="s2">&quot;image&quot;</span>: <span class="s2">&quot;ubuntu:latest&quot;</span>
  <span class="o">}</span>,
  <span class="s2">&quot;cpus&quot;</span>: <span class="s2">&quot;0.1&quot;</span>,
  <span class="s2">&quot;mem&quot;</span>: <span class="s2">&quot;128&quot;</span>,
  <span class="s2">&quot;command&quot;</span>: <span class="s2">&quot;echo </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span>
<span class="o">}</span>
</code></pre></div>
<p>Then run the following command:</p>
<div class="highlight"><pre><span></span><code>curl -i -H <span class="s1">&#39;Content-Type: application/json&#39;</span> http://127.0.0.1:4400/v1/scheduler/iso8601 -d@job.json
</code></pre></div>
<p>If it works fine, you will get <code>204</code> response code:</p>
<div class="highlight"><pre><span></span><code>HTTP/1.1 <span class="m">204</span> No Content
Date: Tue, <span class="m">15</span> Jun <span class="m">2021</span> <span class="m">22</span>:42:49 GMT
Access-Control-Allow-Origin: *
Content-Type: application/json
Server: Jetty<span class="o">(</span><span class="m">9</span>.3.z-SNAPSHOT<span class="o">)</span>
</code></pre></div>
<p>Look at the web UI and see what happens. The job will run only once, then it will be disabled:</p>
<p><img alt="" src="../images/chronos_5.png" /></p>
<h2 id="using-uris-field-to-download-resources">Using URIs field to download resources<a class="headerlink" href="#using-uris-field-to-download-resources" title="Permanent link">&para;</a></h2>
<p>In the following example we will run a simple analysis job on an input dataset.</p>
<p>We will use a custom docker image derived from python:3 including some python libraries. Here is the dockerfile:</p>
<div class="highlight"><pre><span></span><code>FROM python:3
RUN pip install scipy numpy matplotlib pandas sklearn
</code></pre></div>
<p>Push the image on docker hub and then use the <code>uris</code> field to download the python script <a href="https://raw.githubusercontent.com/iotwins-demo/demo_m19/main/src/dataset_analysis.py"><code>dataset_analysis.py</code></a> to be executed and the dataset <a href="https://raw.githubusercontent.com/jbrownlee/Datasets/master/iris.csv"><code>iris.csv</code></a>:</p>
<div class="highlight"><pre><span></span><code><span class="o">{</span>
  <span class="s2">&quot;schedule&quot;</span>: <span class="s2">&quot;R1//PT1M&quot;</span>,
  <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;analysis-job&quot;</span>,
  <span class="s2">&quot;container&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;DOCKER&quot;</span>,
    <span class="s2">&quot;image&quot;</span>: <span class="s2">&quot;marica/demo-corso:latest&quot;</span>
  <span class="o">}</span>,
  <span class="s2">&quot;cpus&quot;</span>: <span class="s2">&quot;1&quot;</span>,
  <span class="s2">&quot;mem&quot;</span>: <span class="s2">&quot;512&quot;</span>,
  <span class="s2">&quot;retries&quot;</span>: <span class="m">3</span>,
  <span class="s2">&quot;uris&quot;</span>: <span class="o">[</span> <span class="s2">&quot;https://raw.githubusercontent.com/iotwins-demo/demo_m19/main/src/dataset_analysis.py&quot;</span>, <span class="s2">&quot;https://raw.githubusercontent.com/jbrownlee/Datasets/master/iris.csv&quot;</span><span class="o">]</span>,
  <span class="s2">&quot;command&quot;</span>: <span class="s2">&quot;cd </span><span class="nv">$MESOS_SANDBOX</span><span class="s2">; python3 dataset_analysis.py iris.csv ./&quot;</span>
<span class="o">}</span>
</code></pre></div>
<p><img alt="" src="../images/job_1.png" /></p>
<p>Go to the Mesos UI and access the job sandbox. </p>
<p><img alt="" src="../images/job_2.png" /></p>
<p>You will see the required files being downloaded:</p>
<p><img alt="" src="../images/job_3.png" /></p>
<p>and after few moments the outputs generated by the job will appear:</p>
<p><img alt="" src="../images/job_4a.png" /></p>
<p><img alt="" src="../images/job_4.png" /></p>
<h2 id="execute-a-job-dependency-chain">Execute a job dependency chain<a class="headerlink" href="#execute-a-job-dependency-chain" title="Permanent link">&para;</a></h2>
<p>The web UI allows to add a dependent job clicking on <code>+ ADD JOB</code> -&gt; <code>dependent</code>. As you can see you will be asked to choose a parent job:</p>
<p><img alt="" src="../images/chronos_depjob.png" /></p>
<p>In the following we will be using the REST API:</p>
<ul>
<li><code>POST</code> /v1/scheduler/iso8601 to add a scheduled job</li>
<li><code>POST</code> /v1/scheduler/dependency to add a dependent job</li>
</ul>
<p>Let's create a first (parent) job that creates a file inside a local volume. </p>
<p>Save the following json file as <code>schedjob.json</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">{</span>
  <span class="s2">&quot;schedule&quot;</span>: <span class="s2">&quot;R1/2031-06-17T07:00:00.000Z/PT10M&quot;</span>,
  <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;job1&quot;</span>,
  <span class="s2">&quot;container&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;DOCKER&quot;</span>,
    <span class="s2">&quot;image&quot;</span>: <span class="s2">&quot;ubuntu:latest&quot;</span>,
    <span class="s2">&quot;network&quot;</span>: <span class="s2">&quot;BRIDGE&quot;</span>,
    <span class="s2">&quot;volumes&quot;</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">&quot;containerPath&quot;</span>: <span class="s2">&quot;/tmp/share&quot;</span>,
        <span class="s2">&quot;hostPath&quot;</span>: <span class="s2">&quot;/tmp&quot;</span>,
        <span class="s2">&quot;mode&quot;</span>: <span class="s2">&quot;RW&quot;</span>
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">&quot;cpus&quot;</span>: <span class="s2">&quot;0.5&quot;</span>,
  <span class="s2">&quot;mem&quot;</span>: <span class="s2">&quot;512&quot;</span>,
  <span class="s2">&quot;command&quot;</span>: <span class="s2">&quot;echo Scritto da job1 &gt; /tmp/share/job1; sleep 60;&quot;</span>
<span class="o">}</span>
</code></pre></div>
<p>Look at the <code>schedule</code>: we are specifying the job start in 10y...just to control the execution start...</p>
<p>Run the following command to submit the job:</p>
<div class="highlight"><pre><span></span><code>curl -X POST -H <span class="s1">&#39;Content-Type: application/json&#39;</span> http://localhost:4400/v1/scheduler/iso8601 -d@schedjob.json
</code></pre></div>
<p>You will see <code>job1</code> in the list of jobs and it will not start as it scheduled in 10y</p>
<p>Now let's create the dependent job (<code>job2</code>) that will read the file from the same local volume and will add some content. Finally, the job will copy the file in its sandbox.</p>
<p>Save the following snippet as <code>depjob.json</code>:</p>
<div class="highlight"><pre><span></span><code><span class="o">{</span>
  <span class="s2">&quot;name&quot;</span>: <span class="s2">&quot;job2&quot;</span>,
  <span class="s2">&quot;container&quot;</span>: <span class="o">{</span>
    <span class="s2">&quot;type&quot;</span>: <span class="s2">&quot;DOCKER&quot;</span>,
    <span class="s2">&quot;image&quot;</span>: <span class="s2">&quot;ubuntu:latest&quot;</span>,
    <span class="s2">&quot;network&quot;</span>: <span class="s2">&quot;BRIDGE&quot;</span>,
    <span class="s2">&quot;volumes&quot;</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">&quot;containerPath&quot;</span>: <span class="s2">&quot;/tmp/share&quot;</span>,
        <span class="s2">&quot;hostPath&quot;</span>: <span class="s2">&quot;/tmp&quot;</span>,
        <span class="s2">&quot;mode&quot;</span>: <span class="s2">&quot;RW&quot;</span>
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span>,
  <span class="s2">&quot;parents&quot;</span>: <span class="o">[</span>
    <span class="s2">&quot;job1&quot;</span>
  <span class="o">]</span>,
  <span class="s2">&quot;cpus&quot;</span>: <span class="s2">&quot;0.5&quot;</span>,
  <span class="s2">&quot;mem&quot;</span>: <span class="s2">&quot;512&quot;</span>,
  <span class="s2">&quot;command&quot;</span>: <span class="s2">&quot;echo Scritto da job2 &gt;&gt; /tmp/share/job1; cp /tmp/share/job1 </span><span class="nv">$MESOS_SANDBOX</span><span class="s2">&quot;</span>
<span class="o">}</span>
</code></pre></div>
<p>Launch the following command to add the dependent job:</p>
<div class="highlight"><pre><span></span><code>curl -X POST -H <span class="s1">&#39;Content-Type: application/json&#39;</span> http://localhost:4400/v1/scheduler/dependency -d@depjob.json
</code></pre></div>
<p><img alt="" src="../images/chronos_depchain.png" /></p>
<p>Now let's force <code>job1</code> to start. You can use the web UI or you can make a <code>PUT</code> request on /v1/scheduler/job/<job name>:</p>
<div class="highlight"><pre><span></span><code>curl -X PUT http://localhost:4400/v1/scheduler/job/job1
</code></pre></div>
<p>The job will start and the dependent job will run only when the parent is completed.</p>
<p>Look at the Mesos UI and monitor the execution of the two tasks.</p>
<p>Then enter the job2 sandbox: you will find the file <code>job1</code> with the two lines written by the two jobs:</p>
<p><img alt="" src="../images/chronos_depchain1.png" /></p>
<p><img alt="" src="../images/chronos_depchain2.png" /></p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../marathon/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Deploy long running services on Marathon" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Deploy long running services on Marathon
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 INFN
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.expand", "navigation.top", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.092fa1f6.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.e3b2bf44.min.js"></script>
      
    
  </body>
</html>